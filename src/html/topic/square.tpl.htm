<!DOCTYPE html>
<html>
    <?php TPL::output('global/head'); ?>
    <body>
        <?php TPL::output('global/header'); ?>
        <section id="main">
            <section id="content">
                <div class="container">
                    <section class="topic-category category-select">
                        <div class="card">
                            <div class="card-header">
                                <h2>
                                    <i class="icon icon-features"></i>专题
                                    <a class="link-action" href="#dlg-topic-category" data-toggle="modal">
                                        <?php if ($this->parent_topic_info) { ?>
                                            <?php echo $this->parent_topic_info['topic_title']; ?>
                                        <?php } else { ?>
                                            全部专题
                                        <?php } ?> 
                                        <i class="caret"></i>
                                    </a>  
                                </h2>
                            </div>
                        </div>
                    </section>
                    
                    <section class="topic-list">
                        <?php TPL::assign('topic_list', $this->topics_list); ?>
                        <?php TPL::output('block/topic_list'); ?>
                    </section>
                    
                    <?php if($this->pagination) { ?> 
                        <div class="card">
                            <div class="card-body card-padding">
                                <?php echo $this->pagination; ?>
                            </div>
                        </div>     
                    <?php } ?>
                </div>
            </section>
            
            <?php TPL::output('global/footer'); ?>
        </section>

        <!-- topic category modal -->
        
        <div class="modal modal-fullpage fade" id="dlg-topic-category" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title"><i class="icon icon-filter"></i> 专题分类</h4>
                        <button type="button" class="btn btn-link" data-dismiss="modal" aria-label="Close">取消</button>
                    </div>
                    <div class="modal-body">
                        <?php if ($this->parent_topics) { ?>
                            <ul class="category-list">
                                <li>
                                    <a <?php if (!$_GET['topic_id']) { ?>class="active"<?php } ?> href="topic/">全部专题</a>
                                </li>
                                <?php foreach ($this->parent_topics AS $key => $val) { ?>
                                    <li>
                                        <a <?php if ($_GET['topic_id'] == $val['topic_id']) { ?> class="active"<?php } ?> href="topic/channel-topic__topic_id-<?php echo $val['topic_id']; ?>"> <?php echo $val['topic_title']; ?></a>
                                    </li>
                                <?php } ?>
                            </ul>
                        <?php } ?>
                    </div>
                </div>
            </div>
        </div>

        <?php TPL::output('global/foot'); ?>
    </body>
</html>